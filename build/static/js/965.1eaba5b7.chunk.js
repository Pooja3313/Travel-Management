"use strict";(self.webpackChunk_minimal_kit_cra_js=self.webpackChunk_minimal_kit_cra_js||[]).push([[965],{30953:(e,t,n)=>{n.d(t,{A:()=>x});var i=n(96446),s=n(88446),r=n(88911),o=n(94496),l=n(22698),a=n(99933),c=n(70579);function d(e){let{link:t,activeLast:n,disabled:r}=e;const{name:o,href:l,icon:d}=t,x={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...r&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},u=(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)(i.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:d}),o]});return l?(0,c.jsx)(s.A,{component:a.W,href:l,sx:x,children:u}):(0,c.jsxs)(i.A,{sx:x,children:[" ",u," "]})}function x(e){let{links:t,action:n,heading:a,moreLink:x,activeLast:m,sx:h,...p}=e;const j=t[t.length-1].name;return(0,c.jsxs)(i.A,{sx:{...h},children:[(0,c.jsxs)(r.A,{direction:"row",alignItems:"center",children:[(0,c.jsxs)(i.A,{sx:{flexGrow:1},children:[a&&(0,c.jsx)(o.A,{variant:"h4",gutterBottom:!0,children:a}),!!t.length&&(0,c.jsx)(l.A,{separator:(0,c.jsx)(u,{}),...p,children:t.map((e=>(0,c.jsx)(d,{link:e,activeLast:m,disabled:e.name===j},e.name||"")))})]}),n&&(0,c.jsxs)(i.A,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!x&&(0,c.jsx)(i.A,{sx:{mt:2},children:x.map((e=>(0,c.jsx)(s.A,{href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function u(){return(0,c.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},94857:(e,t,n)=>{n.d(t,{dh:()=>i.dh});var i=n(26038);n(54582)},99778:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var i=n(29490),s=n(67132),r=n(19252),o=n(48407),l=n(61361),a=n(19442),c=n(30953),d=n(65043),x=n(80899),u=n(24858),m=n(18403),h=n(38246),p=n(12110),j=n(88911),v=n(59229),b=n(46170),A=n(94857),g=n(60262),f=n.n(g),y=n(96446),C=n(49633),w=n(39336),k=n(94814),D=n(94496),I=n(1470),S=n(51787),F=n(79958),q=n(26494),T=n(94289),N=n(2746),L=n(46344),U=n(70579);function z(){const{control:e,setValue:t,resetField:n,getValues:i,watch:s}=(0,u.xW)(),[r,o]=(0,d.useState)([]),a=s(),c=a.items.map((e=>e.quantity*e.price)),x=f()(c),{fields:m,append:h,remove:v}=(0,u.jz)({control:e,name:"items"}),A=(0,d.useCallback)((e=>{t("items[".concat(e,"].coverUrl"),null,{shouldValidate:!0})}),[t]),g=(0,d.useCallback)(((e,n)=>{const i=e[0];if(i)try{const e=Object.assign(i,{preview:URL.createObjectURL(i)});t("items[".concat(n,"].coverUrl"),e,{shouldValidate:!0})}catch(s){console.error("Error creating object URL:",s)}}),[t]),z=(0,d.useCallback)((e=>{const t=e[0];if(t)try{const e=Object.assign(t,{preview:URL.createObjectURL(t)});o([e])}catch(n){console.error("Error creating object URL:",n)}}),[]),P=(0,d.useCallback)((e=>{n("items[".concat(e,"].quantity")),n("items[".concat(e,"].price")),n("items[".concat(e,"].total"))}),[n]),W=(0,d.useCallback)(((e,n)=>{t("items[".concat(n,"].quantity"),Number(e.target.value)),t("items[".concat(n,"].total"),a.items.map((e=>e.quantity*e.price))[n])}),[t,a.items]),R=(0,d.useCallback)(((e,n)=>{t("items[".concat(n,"].price"),Number(e.target.value)),t("items[".concat(n,"].total"),a.items.map((e=>e.quantity*e.price))[n])}),[t,a.items]),E=(0,d.useCallback)(((e,n)=>{const i=l.Fw.find((e=>e.name===n));i&&t("items[".concat(e,"].service"),i.name)}),[t]),_=(0,U.jsx)(j.A,{spacing:2,alignItems:"flex-end",sx:{mt:3,textAlign:"right",typography:"body2"},children:(0,U.jsxs)(j.A,{direction:"row",children:[(0,U.jsx)(y.A,{sx:{color:"text.secondary"},children:"Subtotal"}),(0,U.jsxs)(y.A,{sx:{width:160,typography:"subtitle2"},children:["\u20b9",(0,T.KZ)(x)||"-"]})]})});return(0,U.jsxs)(y.A,{sx:{p:3},children:[(0,U.jsx)(D.A,{variant:"h6",sx:{color:"text.disabled",mb:3},children:"Details:"}),(0,U.jsx)(j.A,{divider:(0,U.jsx)(w.A,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:m.map(((e,t)=>(0,U.jsxs)(j.A,{alignItems:"flex-end",spacing:1.5,children:[(0,U.jsxs)(j.A,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1},children:[(0,U.jsx)(b.o3,{size:"small",name:"items[".concat(t,"].title"),label:"Title",InputLabelProps:{shrink:!0},sx:{maxWidth:{md:350}}}),(0,U.jsx)(b.Y4,{name:"items[".concat(t,"].coverUrl"),maxSize:3145728,onDrop:e=>g(e,t),onDelete:()=>A(t),InputLabelProps:{shrink:!0}}),(0,U.jsxs)(b.tX,{name:"items[".concat(t,"].service"),size:"small",label:"Role",InputLabelProps:{shrink:!0},sx:{maxWidth:{md:160}},children:[(0,U.jsx)(k.A,{value:"",onClick:()=>P(t),sx:{fontStyle:"italic",color:"text.secondary"},children:"None"}),(0,U.jsx)(w.A,{sx:{borderStyle:"dashed"}}),l.Fw.map((e=>(0,U.jsx)(k.A,{value:e.name,onClick:()=>E(t,e.name),children:e.name},e.id)))]}),(0,U.jsx)(b.o3,{size:"small",type:"number",name:"items[".concat(t,"].quantity"),label:"Quantity",placeholder:"0",onChange:e=>W(e,t),InputLabelProps:{shrink:!0},sx:{maxWidth:{md:96}}}),(0,U.jsx)(b.o3,{size:"small",type:"number",name:"items[".concat(t,"].price"),label:"Price",placeholder:"0.00",onChange:e=>R(e,t),InputProps:{startAdornment:(0,U.jsx)(S.A,{position:"start",children:(0,U.jsx)(y.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"\u20b9"})})},sx:{maxWidth:{md:96}}}),(0,U.jsx)(b.o3,{disabled:!0,size:"small",type:"number",name:"items[".concat(t,"].total"),label:"Total",placeholder:"0.00",value:0===a.items[t].total?"":a.items[t].total.toFixed(2),onChange:e=>R(e,t),InputProps:{startAdornment:(0,U.jsx)(S.A,{position:"start",children:(0,U.jsx)(y.A,{sx:{typography:"subtitle2",color:"text.disabled"},children:"\u20b9"})})},sx:{maxWidth:{md:104},["& .".concat(I.A.input)]:{textAlign:{md:"right"}}}})]}),(0,U.jsx)(C.A,{size:"small",color:"error",startIcon:(0,U.jsx)(N.A,{icon:"solar:trash-bin-trash-bold"}),onClick:()=>(e=>{v(e)})(t),children:"Remove"})]},e.id)))}),(0,U.jsx)(w.A,{sx:{my:3,borderStyle:"dashed"}}),(0,U.jsx)(j.A,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:(0,U.jsx)(C.A,{size:"small",color:"primary",startIcon:(0,U.jsx)(N.A,{icon:"mingcute:add-line"}),onClick:()=>{h({title:"",service:"",coverUrl:"",quantity:1,price:0,total:0})},sx:{flexShrink:0},children:"Add Item"})}),(0,U.jsx)("h4",{children:"Report"}),(0,U.jsxs)(p.A,{children:[(0,U.jsx)(F.A,{title:"Upload Report"}),(0,U.jsx)(q.A,{children:(0,U.jsx)(L._O,{multiple:!0,name:"UploadFile",files:r,onDrop:z,onRemove:e=>{const t=r.filter((t=>t!==e));o(t)}})})]}),_]})}var P=n(17392),W=n(88887),R=n(11978);function E(){var e;const{watch:t,setValue:n,formState:{errors:i}}=(0,u.xW)(),s=(0,W.Q)("up","md"),r=t(),{invoiceFrom:o,invoiceTo:a}=r,c=(0,v.C)(),d=(0,v.C)();return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(j.A,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},divider:(0,U.jsx)(w.A,{flexItem:!0,orientation:s?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:[(0,U.jsxs)(j.A,{sx:{width:1},children:[(0,U.jsxs)(j.A,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,U.jsx)(D.A,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"From:"}),(0,U.jsx)(P.A,{onClick:c.onTrue,children:(0,U.jsx)(N.A,{icon:"solar:pen-bold"})})]}),(0,U.jsxs)(j.A,{spacing:1,children:[(0,U.jsx)(D.A,{variant:"subtitle2",children:o.name}),(0,U.jsx)(D.A,{variant:"body2",children:o.fullAddress}),(0,U.jsxs)(D.A,{variant:"body2",children:[" ",o.phoneNumber]})]})]}),(0,U.jsxs)(j.A,{sx:{width:1},children:[(0,U.jsxs)(j.A,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,U.jsx)(D.A,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"To:"}),(0,U.jsx)(P.A,{onClick:d.onTrue,children:(0,U.jsx)(N.A,{icon:a?"solar:pen-bold":"mingcute:add-line"})})]}),a?(0,U.jsxs)(j.A,{spacing:1,children:[(0,U.jsx)(D.A,{variant:"subtitle2",children:a.name}),(0,U.jsx)(D.A,{variant:"body2",children:a.fullAddress}),(0,U.jsxs)(D.A,{variant:"body2",children:[" ",a.phoneNumber]})]}):(0,U.jsx)(D.A,{typography:"caption",sx:{color:"error.main"},children:null===(e=i.invoiceTo)||void 0===e?void 0:e.message})]})]}),(0,U.jsx)(R.ND,{title:"Customers",open:c.value,onClose:c.onFalse,selected:e=>(null===o||void 0===o?void 0:o.id)===e,onSelect:e=>n("invoiceFrom",e),list:l.Kg,action:(0,U.jsx)(C.A,{size:"small",startIcon:(0,U.jsx)(N.A,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})}),(0,U.jsx)(R.ND,{title:"Customers",open:d.value,onClose:d.onFalse,selected:e=>(null===a||void 0===a?void 0:a.id)===e,onSelect:e=>n("invoiceTo",e),list:l.Kg,action:(0,U.jsx)(C.A,{size:"small",startIcon:(0,U.jsx)(N.A,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})})]})}var _=n(83202);function O(){const{control:e,watch:t}=(0,u.xW)(),n=t();return(0,U.jsxs)(j.A,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,bgcolor:"background.neutral"},children:[(0,U.jsx)(b.o3,{disabled:!0,name:"invoiceNumber",label:"Invoice number",value:n.invoiceNumber}),(0,U.jsx)(b.tX,{fullWidth:!0,disabled:!0,name:"status",label:"Status",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["paid","pending","overdue","draft"].map((e=>(0,U.jsx)(k.A,{value:e,children:e},e)))}),(0,U.jsx)(b.o3,{name:"EmpID",label:"Employee ID"}),(0,U.jsx)(b.o3,{name:"from",label:"From Destination"}),(0,U.jsx)(b.o3,{name:"to",label:"To Destination"}),(0,U.jsx)(u.xI,{name:"createDate",control:e,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,U.jsx)(_.l,{label:"Start Date",value:t.value,onChange:e=>{t.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}}),(0,U.jsx)(u.xI,{name:"dueDate",control:e,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,U.jsx)(_.l,{label:"End Date",value:t.value,onChange:e=>{t.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}})]})}function V(e){let{currentInvoice:t}=e;const n=(0,s.rd)(),{enqueueSnackbar:i}=(0,A.dh)(),r=(0,v.C)(),a=(0,v.C)(),c=x.Ik().shape({invoiceTo:x.gl().nullable().required("Invoice to is required"),EmpID:x.Yj().required("Emp_ID is required"),from:x.Yj().required("Destination is required"),to:x.Yj().required("Destination is required"),coverUrl:x.Yj(),UploadFile:x.gl().required("File is required"),createDate:x.gl().nullable().required("Create date is required"),dueDate:x.gl().required("Due date is required").test("date-min","Due date must be later than create date",((e,t)=>{let{parent:n}=t;return e.getTime()>n.createDate.getTime()})),status:x.Yj(),invoiceFrom:x.gl(),invoiceNumber:x.Yj()}),g=(0,d.useMemo)((()=>({invoiceNumber:(null===t||void 0===t?void 0:t.invoiceNumber)||"INV-1990",EmpID:(null===t||void 0===t?void 0:t.EmpID)||"",from:(null===t||void 0===t?void 0:t.from)||"",to:(null===t||void 0===t?void 0:t.to)||"",createDate:(null===t||void 0===t?void 0:t.createDate)||new Date,dueDate:(null===t||void 0===t?void 0:t.dueDate)||null,status:(null===t||void 0===t?void 0:t.status)||"draft",invoiceFrom:(null===t||void 0===t?void 0:t.invoiceFrom)||l.Kg[0],invoiceTo:(null===t||void 0===t?void 0:t.invoiceTo)||null,UploadFile:(null===t||void 0===t?void 0:t.UploadFile)||"",items:(null===t||void 0===t?void 0:t.items)||[{title:"",service:"",coverUrl:"",quantity:1,price:0,total:0}]})),[t]),f=(0,u.mN)({resolver:(0,m.t)(c),defaultValues:g}),{reset:y,handleSubmit:C,formState:{isSubmitting:w,errors:k}}=f;console.log("errors:",k);const D=C((async e=>{r.onTrue();try{await new Promise((e=>setTimeout(e,500))),y(),r.onFalse(),i("save the draft successfully!"),n.push(o.f.dashboard.users.root),console.info("DATA",JSON.stringify(e,null,2))}catch(t){console.error(t),r.onFalse()}})),I=C((async e=>{a.onTrue();try{await new Promise((e=>setTimeout(e,500))),y(),a.onFalse(),i("Update success!"),n.push(o.f.dashboard.users.root),console.info("DATA",JSON.stringify(e,null,2))}catch(t){console.error(t),a.onFalse()}}));return(0,U.jsxs)(b.Ay,{methods:f,children:[(0,U.jsxs)(p.A,{children:[(0,U.jsx)(E,{}),(0,U.jsx)(O,{}),(0,U.jsx)(z,{})]}),(0,U.jsxs)(j.A,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:[(0,U.jsx)(h.A,{color:"inherit",size:"large",variant:"outlined",loading:r.value&&w,onClick:D,children:"Save as Draft"}),(0,U.jsxs)(h.A,{size:"large",variant:"contained",loading:a.value&&w,onClick:I,children:[t?"Update":"Create"," & Send"]})]})]})}function Y(e){let{id:t}=e;const n=(0,a.Mp)(),i=l.U8.find((e=>e.id===t));return(0,U.jsxs)(r.A,{maxWidth:!n.themeStretch&&"lg",children:[(0,U.jsx)(c.A,{heading:"Edit",links:[{name:"Dashboard",href:o.f.dashboard.users.root},{name:"Invoice",href:o.f.dashboard.users.six},{name:null===i||void 0===i?void 0:i.invoiceNumber}],sx:{mb:{xs:3,md:5}}}),(0,U.jsx)(V,{currentInvoice:i})]})}function K(){const e=(0,s.g)(),{id:t}=e;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(i.mg,{children:(0,U.jsx)("title",{children:" Dashboard: Eight"})}),(0,U.jsx)(Y,{id:"".concat(t)})]})}},11978:(e,t,n)=>{n.d(t,{ND:()=>j});var i=n(32184),s=n(70579);n(80899),n(2220);var r=n(2746),o=(n(46170),n(65043));var l=n(96446),a=n(88911),c=n(83462),d=n(67784),x=n(94496),u=n(51787),m=n(38968),h=n(95434),p=n(49981);function j(e){let{title:t="Address Book",list:n,action:j,open:v,onClose:b,selected:A,onSelect:g}=e;const[f,y]=(0,o.useState)(""),C=function(e){let{inputData:t,query:n}=e;if(n)return t.filter((e=>-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.fullAddress.toLowerCase().indexOf(n.toLowerCase())||-1!=="".concat(e.company).toLowerCase().indexOf(n.toLowerCase())));return t}({inputData:n,query:f}),w=!C.length&&!!f,k=(0,o.useCallback)((e=>{y(e.target.value)}),[]),D=(0,o.useCallback)((e=>{g(e),y(""),b()}),[b,g]),I=(0,s.jsx)(a.A,{spacing:.5,sx:{p:.5,maxHeight:640,overflowX:"hidden"},children:C.map((e=>(0,s.jsxs)(a.A,{spacing:.5,component:m.A,selected:A("".concat(e.id)),onClick:()=>D(e),sx:{py:1,px:1.5,borderRadius:1,flexDirection:"column",alignItems:"flex-start",["&.".concat(h.A.selected)]:{bgcolor:"action.selected","&:hover":{bgcolor:"action.selected"}}},children:[(0,s.jsxs)(a.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,s.jsx)(x.A,{variant:"subtitle2",children:e.name}),e.primary&&(0,s.jsx)(i.A,{color:"info",children:"Default"})]}),e.company&&(0,s.jsx)(l.A,{sx:{color:"primary.main",typography:"caption"},children:e.company}),(0,s.jsx)(x.A,{variant:"body2",sx:{color:"text.secondary"},children:e.fullAddress}),e.phoneNumber&&(0,s.jsx)(x.A,{variant:"body2",sx:{color:"text.secondary"},children:e.phoneNumber})]},e.id)))});return(0,s.jsxs)(c.A,{fullWidth:!0,maxWidth:"xs",open:v,onClose:b,children:[(0,s.jsxs)(a.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[(0,s.jsxs)(x.A,{variant:"h6",children:[" ",t," "]}),j&&j]}),(0,s.jsx)(a.A,{sx:{p:2,pt:0},children:(0,s.jsx)(d.A,{value:f,onChange:k,placeholder:"Search...",InputProps:{startAdornment:(0,s.jsx)(u.A,{position:"start",children:(0,s.jsx)(r.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),w?(0,s.jsx)(p.A,{query:f,sx:{px:3,pt:5,pb:10}}):I]})}}}]);
//# sourceMappingURL=965.1eaba5b7.chunk.js.map